功能 1.4 开发文档：NPML引用内容读取功能

概述
本功能负责解析和读取NPML代码中的引用内容。它能够识别NPML代码中特定格式的引用标记（如 !(path/to/file.txt) 或 !(path/to/file.txt#2:5)），提取其中的文件路径和可选的行号范围，然后调用功能1.1（文件按行读取，即FileReader类）来获取指定内容，并为读取到的内容添加行号。

接口与实现类：
- `NPMLReferenceReader`核心类，负责解析NPML内容中的引用标记并读取其内容。
- **接口 `ReferenceResult`**:
  - `path: string` - 原始引用路径（例如 `docs/libs/start.md#5`）。
  - `content: string | null` - 读取到的带行号的文件内容字符串，如果读取失败则为 `null`。
- **方法 `async readReferences(npmlContent: string): Promise<ReferenceResult[]>`**
  - **功能**：解析传入的NPML内容字符串，查找所有符合引用格式的标记，读取每个引用的文件内容（根据可选的行号范围），并为内容添加行号。
  - **返回值**：一个Promise，其结果是一个 `ReferenceResult` 对象的数组。
  - **输入**：`npmlContent: string` - 包含NPML代码及其引用标记的原始字符串。
  - **输出**：`Promise<ReferenceResult[]>`:
    - 成功时，返回一个数组。数组中每个元素是一个 `ReferenceResult` 对象，包含 `path`（原始引用路径）和 `content`（读取到的带行号的文件内容字符串）。
    - 如果某个引用读取失败（如文件不存在），则对应数组元素的 `content` 为 `null`。
    - 如果NPML内容中没有任何引用标记，则返回一个空数组 `[]`。

实现细节
1.  **引用标记解析**：
    - 使用正则表达式 `/!\(([^)]+)\)/g` 来全局匹配NPML内容中所有 `!(...)` 格式的引用标记。
    - 从匹配结果中提取出括号内的内容（例如 `docs/libs/start.md#5`），这将作为 `FileReader` 类的 `readFile` 方法的输入参数。
    - 将所有提取到的引用路径收集到一个数组中。
2.  **内容读取**：
    - 遍历上一步收集到的引用路径数组。
    - 对于每个路径，实例化或注入 `FileReader` 类（功能1.1）。
    - 调用 `FileReader.readFile(filePathWithRange)` 方法来读取文件内容。`filePathWithRange` 即为当前循环中的引用路径。
    - 将 `FileReader` 返回的结果（带行号的内容字符串或 `null`）与原始引用路径一起，存入一个结果数组。
3.  **结果聚合**：
    - 返回最终的结果数组。数组的顺序应与NPML内容中引用标记出现的顺序一致。

功能测试
- 无引用内容：测试输入一个不包含任何 `!(...)` 标记的NPML字符串，验证返回一个空数组 `[]`。
- 单个引用：测试输入包含一个引用标记（如 `!(file.txt)`）的NPML字符串，验证返回的数组包含一个 `{ path, content }` 对象，其中 `content` 包含了 `file.txt` 的全部内容并带有行号。
- 多个引用：测试输入包含多个引用标记的NPML字符串，验证返回的数组包含多个 `{ path, content }` 对象，顺序与标记出现顺序一致。
- 引用带行号范围：测试输入包含带行号范围的引用标记（如 `!(file.txt#2:5)`），验证读取到的内容是 `file.txt` 的第2到第5行，并带有正确的行号。
- 引用带单行号：测试输入包含带单行号的引用标记（如 `!(file.txt#3)`），验证读取到的内容是 `file.txt` 的第3行，并带有正确的行号。
- 混合引用：测试输入包含无范围、单行、多行范围的混合引用标记，验证所有引用都能被正确解析和读取。
- 无效引用路径：测试输入包含指向不存在文件的引用标记，验证该引用对应的结果数组元素为 `null`，且 `FileReader` 应打印错误信息。
- 无效引用格式：测试输入包含格式错误的标记（如 `!(file.txt##2)` 或 `!(file.txt#abc:def)`），这些应被视为无效路径并由 `FileReader` 处理返回 `null`。
- 引用内容为空：测试引用一个空文件，验证其对应的 `content` 为 `""`。
- 引用内容包含换行符：确保读取的引用内容能正确处理不同操作系统的换行符，并正确添加行号。

与其他功能的关系
- **功能 1.1 (文件按行读取)**：`NPMLReferenceReader` 直接依赖 `FileReader` 类来执行实际的文件读取和行号添加操作。
- **功能 1.6 (生成NPML翻译请求文)**：功能 1.6 需要调用 `NPMLReferenceReader` 来获取NPML代码中所有引用文件的内容，然后将其聚合到最终的翻译请求文档中。